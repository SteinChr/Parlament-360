<!DOCTYPE html>
<html>
<head>
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<meta charset="utf-8">
<style>
    h1{
        font-size:45px ;
        text-align:center ;
    }
    h2{
        font-size:30px ;
        text-align:center ;
    }
    p {
        font-size:25px;
    }
body{
    width:1060px;
    margin:50px auto;
   background-color: lightcyan;
}
</style>

    
    <meta charset="utf-8">

    <!-- Load d3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <title> Parlament 360.net</title>
</head>
<body>
    <h1>
        Parlament 360
    </h1>
    <p>
            Wir haben bemerkt, dass viele Abgeordnete des Eu-Parlaments nicht zu Abstimmungen und Diskussionen erscheinen. Mit diesen Diagrammen wollen wir die Anwesenheit der Eu-Parlamentarier und wie die, die da sind, nach ihrer Fraktion aufgeteilt, abstimmen, zeigen.
    </p>
    <h2>
        Die Grafiken
    </h2>




        <p>
            Fülltext 1
        </p>

        <div style="width: 500px"><canvas id="myChart" width="400" height="400"></canvas></div>
        <div style="width: 500px"><canvas id="myChart2" width="400" height="400"></canvas></div>
        <p>
            Copyright Jugend Hackt 2019; 
            Erstellt von: Christian, Yusuf und Viktor.
        </p>
        <script>

        // Create a connection to the file.
        var Connect = new XMLHttpRequest();
        // Define which file to open and
        // send the request.
        Connect.open("GET", "data.xml", false);
        Connect.setRequestHeader("Content-Type", "text/xml");
        Connect.send(null);
        // Place the response in an XML document.
        var TheDocument = Connect.responseXML;
        // 17 als eine spezifische Abstimmung
        console.log(TheDocument);
        console.log(TheDocument.childNodes[1].childNodes[17].childNodes[1].attributes.Number.nodeValue); // Parteien die dafür sind
        console.log(TheDocument.childNodes[1].childNodes[17].childNodes[2].attributes.Number.nodeValue);
        console.log(TheDocument.childNodes[1].childNodes[17].childNodes[3].attributes.Number.nodeValue);
        var parent = TheDocument.childNodes[1].childNodes[17];
        var voteOptions = Array.from(parent.childNodes).filter((voteOption, voteOptionIndex)=> {
            return voteOptionIndex > 0;
        });
        //          | Zugriff auf Dataset    | Abstimmung   |Art der Stimme|Partei     
        console.log(Array.from(voteOptions[1].childNodes).map((childNode)=> {
            return {'name':childNode.attributes.Identifier.value,'value':childNode.childElementCount};
        })); // Partei ident
        console.log(TheDocument.childNodes[1].childNodes[17].childNodes[1].childNodes[0].childElementCount); // Partei count
        
        var x = [
            {'name': 'For', 'value': parent.childNodes[1].attributes.Number.nodeValue, 'colour': 'rgba(255, 99, 132, A)'},
            //{'name': 'Red', 'value': 1, 'colour': 'rgba(255, 99, 132, A)'},
            {'name': 'Against', 'value': parent.childNodes[2].attributes.Number.nodeValue, 'colour': 'rgba(54, 162, 235, A)'},
            
            {'name': 'Abstantion', 'value': parent.childNodes[3].attributes.Number.nodeValue , 'colour': 'rgba(75, 192, 192, A)'},
            {'name': 'Total', 'value': (parseInt(parent.childNodes[3].attributes.Number.nodeValue) + parseInt(parent.childNodes[2].attributes.Number.nodeValue)+parseInt(parent.childNodes[1].attributes.Number.nodeValue)), 'colour': 'rgba(255, 206, 86, A)'},
            {'name': 'Purlple', 'value': 3, 'colour': 'rgba(153, 102, 255, A)'},
            {'name': 'Orange', 'value': 15, 'colour': 'rgba(255, 159, 64, A)'}
        ];


        var parties = {
            'evp':{'name': 'EVP', 'colour': 'rgba(51, 153, 255, A)'},
            'sd':{'name': 'S&D', 'colour': 'rgba(255, 0, 0, A)'},
            'renew':{'name': 'Renew', 'colour': 'rgba(255, 255, 0, A)'},
            'efa':{'name': 'Grüne/EFA', 'colour': 'rgba(0, 153, 0, A)'},
            'id':{'name': 'ID', 'colour': 'rgba(0, 0, 0, A)'},
            'ekr':{'name': 'EKR', 'colour': 'rgba(0, 0, 255, A)'},
            'gue':{'name': 'GUE-NGL', 'colour': 'rgba(153, 0, 0, A)'},
            'fralos':{'name': 'Fraktionslose', 'colour': 'rgba(204, 204, 204, A)'}
        };

        var data1 = [
            {'party': 'evp', 'value': '1'},
            {'party': 'sd', 'value': '3'},
            {'party': 'renew', 'value': '5'},
            {'party': 'efa', 'value': '4'},
            {'party': 'id', 'value': '2'},
            {'party': 'ekr', 'value': '4'},
            {'party': 'gue', 'value': '7'},
            {'party': 'fralos', 'value': '6'}
        ];

        var data2 = [
            {'party': 'evp', 'value': '15'},
            {'party': 'sd', 'value': '32'},
            {'party': 'renew', 'value': '64'},
            {'party': 'efa', 'value': '78'},
            {'party': 'id', 'value': '9'},
            {'party': 'ekr', 'value': '100'},
            {'party': 'gue', 'value': '50'},
            {'party': 'fralos', 'value': '14'}
        ];

        var data3 = [
            {'party': 'evp', 'value': '42'},
            {'party': 'sd', 'value': '23'},
            {'party': 'renew', 'value': '74'},
            {'party': 'efa', 'value': '82'},
            {'party': 'id', 'value': '67'},
            {'party': 'ekr', 'value': '3'},
            {'party': 'gue', 'value': '21'},
            {'party': 'fralos', 'value': '88'}
        ];

        var data4 = [
            {'party': 'evp', 'value': '23'},
            {'party': 'sd', 'value': '32'},
            {'party': 'renew', 'value': '53'},
            {'party': 'efa', 'value': '98'},
            {'party': 'id', 'value': '1'},
            {'party': 'ekr', 'value': '19'},
            {'party': 'gue', 'value': '27'},
            {'party': 'fralos', 'value': '33'}
        ];

        var data5 = [
            {'party': 'evp', 'value': '88'},
            {'party': 'sd', 'value': '87'},
            {'party': 'renew', 'value': '86'},
            {'party': 'efa', 'value': '23'},
            {'party': 'id', 'value': '20'},
            {'party': 'ekr', 'value': '9'},
            {'party': 'gue', 'value': '3'},
            {'party': 'fralos', 'value': '12'}
        ];

        var data6 = [
            {'party': 'evp', 'value': '13'},
            {'party': 'sd', 'value': '24'},
            {'party': 'renew', 'value': '45'},
            {'party': 'efa', 'value': '53'},
            {'party': 'id', 'value': '51'},
            {'party': 'ekr', 'value': '30'},
            {'party': 'gue', 'value': '21'},
            {'party': 'fralos', 'value': '55'}
        ];
        
       

                    var ctx2 = document.getElementById('myChart2').getContext('2d');
        var myChart2 = new Chart(ctx2, {
            type: 'bar',
            data: {
            labels: data1.map(function(item){return parties[item.party].name;}),
            datasets: [{
                label: 'Dafür',
                data: data4.map(function(item){return item.value;}),
                backgroundColor: data4.map(function(item){return parties[item.party].colour.replace('A', '0.9');}),
                borderColor: data4.map(function(item){return parties[item.party].colour.replace('A', '1');}),
                borderWidth: 1
            },{
                label: 'Dagegen',
                data: data5.map(function(item){return item.value;}),
                backgroundColor: data5.map(function(item){return parties[item.party].colour.replace('A', '0.6');}),
                borderColor: data5.map(function(item){return parties[item.party].colour.replace('A', '1');}),
                borderWidth: 1
            },{
                label: 'Enthaltung',
                data: data6.map(function(item){return item.value;}),
                backgroundColor: data6.map(function(item){return parties[item.party].colour.replace('A', '0.3');}),
                borderColor: data6.map(function(item){return parties[item.party].colour.replace('A', '1');}),
                borderWidth: 1
            }]
            },

            
                        options: {
                            scales: {
                                xAxes: [{
                                    stacked:true,
                                    
                                }],
                                yAxes: [{
                                    stacked:true,
                                    
                                }]
                            }
                        }
                    });

function createDiagram(dataDafuer, dataDagegen, dataEnthaltung) {
    var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
            labels: dataDafuer.map(function(item){return parties[item.party].name;}),
            datasets: [{
                label: 'Dafür',
                data: dataDafuer.map(function(item){return item.value;}),
                backgroundColor: dataDafuer.map(function(item){return parties[item.party].colour.replace('A', '0.9');}),
                borderColor: dataDafuer.map(function(item){return parties[item.party].colour.replace('A', '1');}),

                borderWidth: 1
            },{
                label: 'Dagegen',
                data: dataDagegen.map(function(item){return item.value;}),
                backgroundColor: dataDagegen.map(function(item){return parties[item.party].colour.replace('A', '0.6');}),
                borderColor: dataDagegen.map(function(item){return parties[item.party].colour.replace('A', '1');}),

                borderWidth: 1
            },{
                label: 'Enthaltung',
                data: dataEnthaltung.map(function(item){return item.value;}),
                backgroundColor: dataEnthaltung.map(function(item){return parties[item.party].colour.replace('A', '0.3');}),
                borderColor: dataEnthaltung.map(function(item){return parties[item.party].colour.replace('A', '1');}),

                borderWidth: 1
            }]
            },

            
                        options: {
                            scales: {
                                xAxes: [{
                                    stacked:true,
                                    
                                }],
                                yAxes: [{
                                    stacked:true,
                                }]
                            }
                        }
                    });
}

                    </script>


    </body>
</html>


